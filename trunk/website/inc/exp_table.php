<?php

// Just a simple array. Used for both item levels and player levels.
/*
$__exp_input = <<<END
00 00 00 00 00 00 00 00  0F 00 00 00 00 00 00 00
22 00 00 00 00 00 00 00  39 00 00 00 00 00 00 00
5C 00 00 00 00 00 00 00  87 00 00 00 00 00 00 00
74 01 00 00 00 00 00 00  30 02 00 00 00 00 00 00
48 03 00 00 00 00 00 00  DA 04 00 00 00 00 00 00
DA 04 00 00 00 00 00 00  DA 04 00 00 00 00 00 00
DA 04 00 00 00 00 00 00  DA 04 00 00 00 00 00 00
DA 04 00 00 00 00 00 00  D2 05 00 00 00 00 00 00
FC 06 00 00 00 00 00 00  61 08 00 00 00 00 00 00
0E 0A 00 00 00 00 00 00  10 0C 00 00 00 00 00 00
79 0E 00 00 00 00 00 00  5E 11 00 00 00 00 00 00
D7 14 00 00 00 00 00 00  02 19 00 00 00 00 00 00
02 1E 00 00 00 00 00 00  02 24 00 00 00 00 00 00
35 2B 00 00 00 00 00 00  D9 33 00 00 00 00 00 00
37 3E 00 00 00 00 00 00  A8 4A 00 00 00 00 00 00
A8 4A 00 00 00 00 00 00  A8 4A 00 00 00 00 00 00
A8 4A 00 00 00 00 00 00  A8 4A 00 00 00 00 00 00
A8 4A 00 00 00 00 00 00  96 59 00 00 00 00 00 00
80 6B 00 00 00 00 00 00  00 81 00 00 00 00 00 00
CC 9A 00 00 00 00 00 00  C1 B9 00 00 00 00 00 00
9D C8 00 00 00 00 00 00  A9 D8 00 00 00 00 00 00
FE E9 00 00 00 00 00 00  B6 FC 00 00 00 00 00 00
ED 10 01 00 00 00 00 00  C2 26 01 00 00 00 00 00
56 3E 01 00 00 00 00 00  CD 57 01 00 00 00 00 00
4E 73 01 00 00 00 00 00  02 91 01 00 00 00 00 00
16 B1 01 00 00 00 00 00  BB D3 01 00 00 00 00 00
26 F9 01 00 00 00 00 00  8F 21 02 00 00 00 00 00
34 4D 02 00 00 00 00 00  56 7C 02 00 00 00 00 00
3E AF 02 00 00 00 00 00  38 E6 02 00 00 00 00 00
98 21 03 00 00 00 00 00  B8 61 03 00 00 00 00 00
B8 61 03 00 00 00 00 00  B8 61 03 00 00 00 00 00
B8 61 03 00 00 00 00 00  B8 61 03 00 00 00 00 00
B8 61 03 00 00 00 00 00  F9 A6 03 00 00 00 00 00
C5 F1 03 00 00 00 00 00  8D 42 04 00 00 00 00 00
CB 99 04 00 00 00 00 00  04 F8 04 00 00 00 00 00
C6 5D 05 00 00 00 00 00  AC CB 05 00 00 00 00 00
5D 42 06 00 00 00 00 00  8D C2 06 00 00 00 00 00
FE 4C 07 00 00 00 00 00  D2 CF 07 00 00 00 00 00
CE 5B 08 00 00 00 00 00  97 F1 08 00 00 00 00 00
DC 91 09 00 00 00 00 00  59 3D 0A 00 00 00 00 00
D7 F4 0A 00 00 00 00 00  2D B9 0B 00 00 00 00 00
42 8B 0C 00 00 00 00 00  0B 6C 0D 00 00 00 00 00
90 5C 0E 00 00 00 00 00  EC 5D 0F 00 00 00 00 00
4B 71 10 00 00 00 00 00  F1 97 11 00 00 00 00 00
37 D3 12 00 00 00 00 00  8F 24 14 00 00 00 00 00
84 8D 15 00 00 00 00 00  BD 0F 17 00 00 00 00 00
FF AC 18 00 00 00 00 00  2F 67 1A 00 00 00 00 00
53 40 1C 00 00 00 00 00  96 3A 1E 00 00 00 00 00
49 58 20 00 00 00 00 00  E7 9B 22 00 00 00 00 00
18 08 25 00 00 00 00 00  B3 9F 27 00 00 00 00 00
B3 9F 27 00 00 00 00 00  B3 9F 27 00 00 00 00 00
B3 9F 27 00 00 00 00 00  B3 9F 27 00 00 00 00 00
B3 9F 27 00 00 00 00 00  C2 65 2A 00 00 00 00 00
85 5D 2D 00 00 00 00 00  77 8A 30 00 00 00 00 00
51 F0 33 00 00 00 00 00  0E 93 37 00 00 00 00 00
F2 76 3B 00 00 00 00 00  8D A0 3F 00 00 00 00 00
BF 14 44 00 00 00 00 00  C2 D8 48 00 00 00 00 00
2B F2 4D 00 00 00 00 00  F5 66 53 00 00 00 00 00
86 3D 59 00 00 00 00 00  B5 7C 5F 00 00 00 00 00
D6 2B 66 00 00 00 00 00  BE 52 6D 00 00 00 00 00
D0 F9 74 00 00 00 00 00  04 2A 7D 00 00 00 00 00
F4 EC 85 00 00 00 00 00  E6 4C 8F 00 00 00 00 00
D7 54 99 00 00 00 00 00  89 10 A4 00 00 00 00 00
92 8C AF 00 00 00 00 00  69 D6 BB 00 00 00 00 00
75 FC C8 00 00 00 00 00  21 0E D7 00 00 00 00 00
EA 1B E6 00 00 00 00 00  77 37 F6 00 00 00 00 00
AA 73 07 01 00 00 00 00  B8 E4 19 01 00 00 00 00
3F A0 2D 01 00 00 00 00  62 BD 42 01 00 00 00 00
E1 54 59 01 00 00 00 00  38 81 71 01 00 00 00 00
BE 5E 8B 01 00 00 00 00  C6 0B A7 01 00 00 00 00
C1 A8 C4 01 00 00 00 00  68 58 E4 01 00 00 00 00
DF 3F 06 02 00 00 00 00  E6 86 2A 02 00 00 00 00
05 58 51 02 00 00 00 00  BD E0 7A 02 00 00 00 00
BF 51 A7 02 00 00 00 00  25 DF D6 02 00 00 00 00
AF C0 09 03 00 00 00 00  02 32 40 03 00 00 00 00
F2 72 7A 03 00 00 00 00  CA C7 B8 03 00 00 00 00
9D 79 FB 03 00 00 00 00  9B D6 42 04 00 00 00 00
6D 32 8F 04 00 00 00 00  98 E6 E0 04 00 00 00 00
E5 52 38 05 00 00 00 00  D1 DD 95 05 00 00 00 00
06 F5 F9 05 00 00 00 00  DA 0D 65 06 00 00 00 00
00 47 C7 06 00 00 00 00  DC 64 2F 07 00 00 00 00
F3 C1 9D 07 00 00 00 00  39 BE 12 08 00 00 00 00
65 BF 8E 08 00 00 00 00  47 31 12 09 00 00 00 00
27 86 9D 09 00 00 00 00  29 37 31 0A 00 00 00 00
B5 C4 CD 0A 00 00 00 00  E8 B6 73 0B 00 00 00 00
0A 9E 23 0C 00 00 00 00  0A 13 DE 0C 00 00 00 00
05 B8 A3 0D 00 00 00 00  D2 38 75 0E 00 00 00 00
96 4B 53 0F 00 00 00 00  66 B1 3E 10 00 00 00 00
EC 36 38 11 00 00 00 00  18 B5 40 12 00 00 00 00
E1 11 59 13 00 00 00 00  08 41 82 14 00 00 00 00
EE 44 BD 15 00 00 00 00  77 2F 0B 17 00 00 00 00
F3 22 6D 18 00 00 00 00  20 53 E4 19 00 00 00 00
31 06 72 1B 00 00 00 00  EC 95 17 1D 00 00 00 00
D6 70 D6 1E 00 00 00 00  72 1B B0 20 00 00 00 00
92 31 A6 22 00 00 00 00  BE 67 BA 24 00 00 00 00
AF 8C EE 26 00 00 00 00  E2 8A 44 29 00 00 00 00
41 6A BE 2B 00 00 00 00  E8 51 5E 2E 00 00 00 00
05 8A 26 31 00 00 00 00  D2 7D 19 34 00 00 00 00
B0 BD 39 37 00 00 00 00  63 01 8A 3A 00 00 00 00
6E 2A 0D 3E 00 00 00 00  93 46 C6 41 00 00 00 00
26 8D 8C 83 00 00 00 00  94 DC DB 9D 00 00 00 00
E4 3B 6E BD 00 00 00 00  AB 14 51 E3 00 00 00 00
66 B2 C7 10 01 00 00 00  47 09 56 47 01 00 00 00
BB A4 CD 88 01 00 00 00  13 2C 5D D7 01 00 00 00
B0 01 A3 35 02 00 00 00  A0 9B C3 A6 02 00 00 00
48 D9 FA 9E 05 00 00 00  65 94 51 F5 05 00 00 00
75 79 D6 50 06 00 00 00  58 1A D9 B1 06 00 00 00
1F CF AD 18 07 00 00 00  63 FF AD 85 07 00 00 00
FD 6F 38 F9 07 00 00 00  6D 95 B1 73 08 00 00 00
30 EB 83 F5 08 00 00 00  56 50 20 7F 09 00 00 00
BD 17 BE C0 13 00 00 00  ED 22 03 8B 14 00 00 00
00 6C 5F 5D 15 00 00 00  7A CC 25 38 16 00 00 00
41 6E AC 1B 17 00 00 00  8B ED 4C 08 18 00 00 00
2A 7C 64 FE 18 00 00 00  40 06 54 FE 19 00 00 00
6B 58 80 08 1B 00 00 00  79 47 52 1D 1C 00 00 00
2A 21 89 5A 39 00 00 00  4E B6 2F 80 3A 00 00 00
4F C9 B5 AB 3B 00 00 00  0E 6C 39 DD 3C 00 00 00
60 4A D9 14 3E 00 00 00  24 AD B4 52 3F 00 00 00
67 7D EB 96 40 00 00 00  97 47 9E E1 41 00 00 00
C8 3E EE 32 43 00 00 00  09 40 FD 8A 44 00 00 00
D4 15 EB 74 8A 00 00 00  7C 13 5E D7 8B 00 00 00
F5 74 5C 3D 8D 00 00 00  2A 4D EF A6 8E 00 00 00
41 C6 1F 14 90 00 00 00  D6 21 F7 84 91 00 00 00
36 B9 7E F9 92 00 00 00  9F FD BF 71 94 00 00 00
7A 78 C4 ED 95 00 00 00  99 CB 95 6D 97 00 00 00
END;

$__exp_input = str_replace(array('  ', "\r\n"), ' ', $__exp_input);

function ReverseHex($value) {
	$ret = '';
	for ($i = strlen($value) - 2; $i >= 0 ; $i -= 2) {
		$ret .= substr($value, $i, 2);
	}
	return $ret;
}

$table = array();
$blocklen = 8 * 3; // 8 digits, 3 characters per digit
for ($i = 0; $i < 250; $i++) {
	$offset = $blocklen * $i;
	$exphex = str_replace(' ', '', substr($__exp_input, $offset, $blocklen));
	$table[$i] = hexdec(ReverseHex($exphex));
}

var_export($table);
*/

$__exp_table = array (
  0 => 0,
  1 => 15,
  2 => 34,
  3 => 57,
  4 => 92,
  5 => 135,
  6 => 372,
  7 => 560,
  8 => 840,
  9 => 1242,
  10 => 1242,
  11 => 1242,
  12 => 1242,
  13 => 1242,
  14 => 1242,
  15 => 1490,
  16 => 1788,
  17 => 2145,
  18 => 2574,
  19 => 3088,
  20 => 3705,
  21 => 4446,
  22 => 5335,
  23 => 6402,
  24 => 7682,
  25 => 9218,
  26 => 11061,
  27 => 13273,
  28 => 15927,
  29 => 19112,
  30 => 19112,
  31 => 19112,
  32 => 19112,
  33 => 19112,
  34 => 19112,
  35 => 22934,
  36 => 27520,
  37 => 33024,
  38 => 39628,
  39 => 47553,
  40 => 51357,
  41 => 55465,
  42 => 59902,
  43 => 64694,
  44 => 69869,
  45 => 75458,
  46 => 81494,
  47 => 88013,
  48 => 95054,
  49 => 102658,
  50 => 110870,
  51 => 119739,
  52 => 129318,
  53 => 139663,
  54 => 150836,
  55 => 162902,
  56 => 175934,
  57 => 190008,
  58 => 205208,
  59 => 221624,
  60 => 221624,
  61 => 221624,
  62 => 221624,
  63 => 221624,
  64 => 221624,
  65 => 239353,
  66 => 258501,
  67 => 279181,
  68 => 301515,
  69 => 325636,
  70 => 351686,
  71 => 379820,
  72 => 410205,
  73 => 443021,
  74 => 478462,
  75 => 511954,
  76 => 547790,
  77 => 586135,
  78 => 627164,
  79 => 671065,
  80 => 718039,
  81 => 768301,
  82 => 822082,
  83 => 879627,
  84 => 941200,
  85 => 1007084,
  86 => 1077579,
  87 => 1153009,
  88 => 1233719,
  89 => 1320079,
  90 => 1412484,
  91 => 1511357,
  92 => 1617151,
  93 => 1730351,
  94 => 1851475,
  95 => 1981078,
  96 => 2119753,
  97 => 2268135,
  98 => 2426904,
  99 => 2596787,
  100 => 2596787,
  101 => 2596787,
  102 => 2596787,
  103 => 2596787,
  104 => 2596787,
  105 => 2778562,
  106 => 2973061,
  107 => 3181175,
  108 => 3403857,
  109 => 3642126,
  110 => 3897074,
  111 => 4169869,
  112 => 4461759,
  113 => 4774082,
  114 => 5108267,
  115 => 5465845,
  116 => 5848454,
  117 => 6257845,
  118 => 6695894,
  119 => 7164606,
  120 => 7666128,
  121 => 8202756,
  122 => 8776948,
  123 => 9391334,
  124 => 10048727,
  125 => 10752137,
  126 => 11504786,
  127 => 12310121,
  128 => 13171829,
  129 => 14093857,
  130 => 15080426,
  131 => 16136055,
  132 => 17265578,
  133 => 18474168,
  134 => 19767359,
  135 => 21151074,
  136 => 22631649,
  137 => 24215864,
  138 => 25910974,
  139 => 27724742,
  140 => 29665473,
  141 => 31742056,
  142 => 33963999,
  143 => 36341478,
  144 => 38885381,
  145 => 41607357,
  146 => 44519871,
  147 => 47636261,
  148 => 50970799,
  149 => 54538754,
  150 => 58356466,
  151 => 62441418,
  152 => 66812317,
  153 => 71489179,
  154 => 76493421,
  155 => 81847960,
  156 => 87577317,
  157 => 93707729,
  158 => 100267270,
  159 => 107285978,
  160 => 113723136,
  161 => 120546524,
  162 => 127779315,
  163 => 135446073,
  164 => 143572837,
  165 => 152187207,
  166 => 161318439,
  167 => 170997545,
  168 => 181257397,
  169 => 192132840,
  170 => 203660810,
  171 => 215880458,
  172 => 228833285,
  173 => 242563282,
  174 => 257117078,
  175 => 272544102,
  176 => 288896748,
  177 => 306230552,
  178 => 324604385,
  179 => 344080648,
  180 => 364725486,
  181 => 386609015,
  182 => 409805555,
  183 => 434393888,
  184 => 460457521,
  185 => 488084972,
  186 => 517370070,
  187 => 548412274,
  188 => 581317010,
  189 => 616196030,
  190 => 653167791,
  191 => 692357858,
  192 => 733899329,
  193 => 777933288,
  194 => 824609285,
  195 => 874085842,
  196 => 926530992,
  197 => 982122851,
  198 => 1041050222,
  199 => 1103513235,
  200 => 2207026470,
  201 => 2648431764,
  202 => 3178118116,
  203 => 3813741739,
  204 => 4576490086,
  205 => 5491788103,
  206 => 6590145723,
  207 => 7908174867,
  208 => 9489809840,
  209 => 11387771808,
  210 => 24142076232,
  211 => 25590600805,
  212 => 27126036853,
  213 => 28753599064,
  214 => 30478815007,
  215 => 32307543907,
  216 => 34245996541,
  217 => 36300756333,
  218 => 38478801712,
  219 => 40787529814,
  220 => 84838062013,
  221 => 88231584493,
  222 => 91760847872,
  223 => 95431281786,
  224 => 99248533057,
  225 => 103218474379,
  226 => 107347213354,
  227 => 111641101888,
  228 => 116106745963,
  229 => 120751015801,
  230 => 246332072234,
  231 => 251258713678,
  232 => 256283887951,
  233 => 261409565710,
  234 => 266637757024,
  235 => 271970512164,
  236 => 277409922407,
  237 => 282958120855,
  238 => 288617283272,
  239 => 294389628937,
  240 => 594667050452,
  241 => 600613720956,
  242 => 606619858165,
  243 => 612686056746,
  244 => 618812917313,
  245 => 625001046486,
  246 => 631251056950,
  247 => 637563567519,
  248 => 643939203194,
  249 => 650378595225,
);

function GetExpPercentage($level, $currentEXP) {
	global $__exp_table;

	$neededEXP = GetNextLevelEXP($level);
	
	return ($currentEXP / $neededEXP * 100);
}

function GetNextLevelEXP($level) {
	global $__exp_table;

	if ($level <= 0 || $level >= 250) return 0;
	return $__exp_table[$level];
}


?>